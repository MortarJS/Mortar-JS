"use strict";var React=require("react"),classNames=require("classnames"),ModalContainer=React.createClass({displayName:"ModalContainer",propTypes:{openWhen:React.PropTypes.bool.isRequired,width:React.PropTypes.string,title:React.PropTypes.string.isRequired,closeText:React.PropTypes.string,confirmText:React.PropTypes.string,modalBodyClasses:React.PropTypes.string,hideButtons:React.PropTypes.bool,beforeOpen:React.PropTypes.func,afterOpen:React.PropTypes.func,beforeClose:React.PropTypes.func,afterClose:React.PropTypes.func,beforeConfirm:React.PropTypes.func,afterConfirm:React.PropTypes.func,disableConfirm:React.PropTypes.bool,children:React.PropTypes.oneOfType([React.PropTypes.array,React.PropTypes.object]),options:React.PropTypes.shape({keepOpen:React.PropTypes.bool})},getInitialState:function(){return{isOpen:!1}},validInputRegExp:new RegExp(/^\d+(px|em|\%|cm|mm|in|pt|pc|ch|vh|vw|vmin|vmax)$/),digitRegExp:new RegExp(/\d+/),unitRegExp:new RegExp(/^\d+(px|em|\%|cm|mm|in|pt|pc|ch|vh|vw|vmin|vmax)$/),addKeyUpListener:function(){window.addEventListener("keyup",this.handleKeyUp)},removeKeyUpListener:function(){window.removeEventListener("keyup",this.handleKeyUp)},componentWillReceiveProps:function(e){e.openWhen&&this.openModal()},openModal:function(){this._modalLifeCycleEvent("open",!0),this.addKeyUpListener()},closeModal:function(){this._modalLifeCycleEvent("close",!1),this.removeKeyUpListener()},confirmModal:function(){this._modalLifeCycleEvent("confirm",!1),this.removeKeyUpListener()},_modalLifeCycleEvent:function(e,t){e=e.charAt(0).toUpperCase()+e.slice(1),this._callUserFunc("before"+e),this.setState({isOpen:t}),this._callUserFunc("after"+e)},_shouldRenderOverlay:function(){return this.state.isOpen&&React.createElement("div",{className:"mortar-modal-backdrop fade in"})},_callUserFunc:function(e){this.props[e]&&this.props[e]()},confirmButton:function(){return React.createElement("button",{type:"button",className:"btn btn-primary",disabled:this.props.disableConfirm,onClick:this.confirmModal},this.props.confirmText||"Confirm")},cancelButton:function(){return React.createElement("button",{type:"button",className:"btn btn-default",onClick:this.closeModal},this.props.closeText||"Cancel")},handleClick:function(e){var t=this.refs.dialog,o=this.props.options||{};o.keepOpen||t.contains(e.target)||this.closeModal()},handleKeyUp:function(e){this.props.options||{};27!==e.keyCode||this.props.options.keepOpen||(e.preventDefault(),this.closeModal())},_buildButtons:function(){return this.props.hideButtons?null:React.createElement("div",{className:"mortar-modal-footer"},this.cancelButton(),this.confirmButton())},_modalClassnames:function(){return classNames({"mortar-modal":!0,fade:!0,"in":this.state.isOpen})},_modalBodyClasses:function(){return this.props.modalBodyClasses?"mortar-modal-body "+this.props.modalBodyClasses:"mortar-modal-body"},_modalWidth:function(){var e=this.props.width;if(!this.props.width)return{};if(!this.validInputRegExp.test(e)){if(!this.digitRegExp.test(e))return console.error('A digit is required when specifying width.  Your input: "'+e+'".  Falling back to the default 600px.'),{};if(!this.unitRegExp.test(e))return console.error('The value provided for width: "'+e+'" was not valid.  Please note that valid css units are required: https://developer.mozilla.org/en-US/docs/Web/CSS/length.  Falling back to the default 600px.'),{}}return{width:e}},_renderModal:function(){return React.createElement("div",null,React.createElement("div",{className:this._modalClassnames(),role:"dialog",onClick:this.handleClick},React.createElement("div",{className:"mortar-modal-dialog",ref:"dialog",style:this._modalWidth()},React.createElement("div",{className:"mortar-modal-content"},React.createElement("div",{className:"mortar-modal-header"},!this.props.hideButtons&&React.createElement("button",{type:"button",className:"close",onClick:this.closeModal},"Ã—"),React.createElement("h4",{className:"mortar-modal-title"},this.props.title)),React.createElement("div",{className:this._modalBodyClasses()},this.props.children),React.createElement("div",{className:"clearfix"}),this._buildButtons()))),this._shouldRenderOverlay())},render:function(){return React.createElement("div",{className:"modal-container"},this.state.isOpen&&this._renderModal())}});module.exports=ModalContainer;