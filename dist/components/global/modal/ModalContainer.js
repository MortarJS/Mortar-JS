"use strict";var React=require("react/addons"),classNames=require("classnames"),ModalContainer=React.createClass({displayName:"ModalContainer",propTypes:{openWhen:React.PropTypes.bool.isRequired,options:React.PropTypes.shape({width:React.PropTypes.string,keepOpen:React.PropTypes.bool}),buttonText:React.PropTypes.string,target:React.PropTypes.string,title:React.PropTypes.string.isRequired,closeText:React.PropTypes.string,saveText:React.PropTypes.string},getInitialState:function(){return{isOpen:!1}},componentDidMount:function(){window.addEventListener("keyup",this.handleKeyUp)},componentWillUnmount:function(){window.removeEventListener("keyup",this.handleKeyUp)},openModal:function(){this._callUserFunc("beforeOpen"),this.setState({isOpen:!0}),this._callUserFunc("afterOpen")},closeModal:function(){this._callUserFunc("beforeClose"),this.setState({isOpen:!1}),this._callUserFunc("afterClose")},saveModal:function(){this._callUserFunc("beforeSave"),this.setState({isOpen:!1}),this._callUserFunc("afterSave")},_shouldRenderOverlay:function(){return this.props.openWhen?React.createElement("div",{className:"modal-backdrop fade in"}):void 0},_callUserFunc:function(e){"undefined"!=typeof this.props[e]&&this.props[e]()},_shouldDisableButton:function(){return this.props.disableSaveWhen},saveButton:function(){return React.createElement("button",{type:"button",className:"btn btn-primary",disabled:this._shouldDisableButton(),onClick:this.saveModal},this.props.saveText||"Save")},cancelButton:function(){return React.createElement("button",{type:"button",className:"btn btn-default",onClick:this.closeModal},this.props.closeText||"Cancel")},handleClick:function(e){var t=this.refs.dialog.getDOMNode(),s=this.props.options||{};s.keepOpen||t.contains(e.target)||this.closeModal()},handleKeyUp:function(e){27===e.keyCode&&this.closeModal()},_buildButtons:function(){return"string"==typeof this.props.showButton?React.createElement("div",{className:"modal-footer"},this[this.props.showButton+"Button"]()):this.props.disableButtons?void 0:React.createElement("div",{className:"modal-footer"},this.cancelButton(),this.saveButton())},render:function(){var e=classNames({modal:!0,fade:!0,"in":this.props.openWhen}),t={display:this.props.openWhen?"block":"none"},s={width:this.props.options&&this.props.options.width?this.props.options.width:"600px"},o="undefined"==typeof this.props.modalBodyClasses?"modal-body":"modal-body "+this.props.modalBodyClasses;return React.createElement("div",{className:"modal-component"},this.props.openWhen&&React.createElement("div",null,React.createElement("div",{className:e,id:this.props.target,tabIndex:"-1",role:"dialog",style:t,onClick:this.handleClick},React.createElement("div",{className:"modal-dialog",ref:"dialog",style:s},React.createElement("div",{className:"modal-content"},React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close",onClick:this.closeModal},"Ã—"),React.createElement("h4",{className:"modal-title",id:this.props.target+"Label"},this.props.title)),React.createElement("div",{className:o},this.props.children),React.createElement("div",{className:"clearfix"}),this._buildButtons()))),this._shouldRenderOverlay()))}});module.exports=ModalContainer;