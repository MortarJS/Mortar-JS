"use strict";var React=require("react"),className=require("classnames"),Button=require("../../global/button/Button"),SelectBox=require("../../resource-editing/resource-form/SelectBox"),MultipleFilterOptions=require("./MultipleFilterOptions"),Filter=React.createClass({displayName:"Filter",propTypes:{actionMethod:React.PropTypes.string,mods:React.PropTypes.array,multiple:React.PropTypes.bool,filters:React.PropTypes.object,label:React.PropTypes.string},getInitialState:function(){return{showFilters:!1}},getDefaultProps:function(){return{label:"No Filter"}},defaultOption:{value:""},buildOptionsList:function(){return this.props.multiple?this.buildMultipleOptionsList():this.buildSingleOptionsList()},toggleFilter:function(){this.setState({showFilters:!this.state.showFilters})},buildMultipleOptionsList:function(){var t=this.props.mods||["info"],e={visible:this.state.showFilters,hidden:!this.state.showFilters,panel:!0,"multi-filter":!0};return React.createElement("div",null,React.createElement(Button,{mods:t,action:this.toggleFilter,handleAction:this.toggleFilter,text:"Filter"}),React.createElement("div",{className:className(e)},React.createElement(MultipleFilterOptions,{options:this.props.filters,bindResource:this.state.boundResource,actionMethod:this.props.actionMethod})))},buildSingleOptionsList:function(){var t=[this.defaultOption];t[0].label=this.props.label;for(var e in this.props.filters)this.props.filters.hasOwnProperty(e)&&t.push({value:e,label:e});return React.createElement(SelectBox,{fieldKey:"filter",options:t,bindResource:this.state.boundResource,changeCallback:this.handleChange})},handleChange:function(t,e){var i={};""===e?i.filters={}:i.filters=this.props.filters[e],this.props.actionMethod(i)},render:function(){return React.createElement("div",null," ",this.buildOptionsList()," ")}});module.exports=Filter;