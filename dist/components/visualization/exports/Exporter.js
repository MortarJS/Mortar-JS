"use strict";var _=require("lodash"),React=require("react"),Button=require("../../global/button/Button"),CmsUserStore=require("../../../stores/CmsUserStore"),Exporter=React.createClass({displayName:"Exporter",propTypes:{format:React.PropTypes.string,resourceAction:React.PropTypes.func.isRequired,resourceOptions:React.PropTypes.object.isRequired,params:React.PropTypes.object,text:React.PropTypes.string,mods:React.PropTypes.array,overrideMethod:React.PropTypes.func,disabled:React.PropTypes.bool},defaultParams:function(){return{format:this.props.format||"csv",paginate:!1}},handleClick:function(e){switch(e){case"click":this.sendAction()}},buildRequestOptions:function(){var e={};e.exportParams=this.props.params||this.defaultParams(),e.exportParams.access_token=CmsUserStore.getToken();var t=_.cloneDeep(this.props.resourceOptions);return _.assign(t.modifiers,t.modifiers,e),t.inNewWindow=!0,t},sendAction:function(){var e=this.props.overrideMethod||"listResource";this.props.resourceAction[e](this.buildRequestOptions())},render:function(){return React.createElement("div",null,React.createElement(Button,{text:this.props.text||"Export",mods:this.props.mods||[],handleAction:this.handleClick,action:"click",disabled:this.props.disabled||!1}))}});module.exports=Exporter;