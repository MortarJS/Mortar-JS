"use strict";var _=require("lodash"),React=require("react"),SumRow=React.createClass({displayName:"SumRow",propTypes:{data:React.PropTypes.array.isRequired,dataKeys:React.PropTypes.object.isRequired,rows:React.PropTypes.array.isRequired,options:React.PropTypes.object},buildRowData:function(){var t=this.props.dataKeys,e=this.props.rows,a=_.cloneDeep(this.props.data[0]),r={},o=this;this.props.data.forEach(function(t){e.forEach(function(e){r[e]=r[e]||0,r[e]+=t[e]})});for(var s in t)t.hasOwnProperty(s)&&e.forEach(function(e){t[s]===e?a[e]=r[e]:a[t[s]]=""});var n=0,p=Object.keys(t).map(function(e){return t[e]}),i=p.map(function(t,e){var r=_.get(a,t);if(""===r&&e+1===p.length)return React.createElement("td",{key:"index",colSpan:n+1});if(""===r)return n++,!1;var s=_.clone(n),c=[];return n=0,s&&c.push(React.createElement("td",{key:"key",colSpan:s})),c.push(React.createElement("td",{key:e},o.mutateData(t,r,i)||r)),c});return this.props.options&&this.props.options.actionableRows&&i.push(React.createElement("td",null)),this.props.options&&this.props.options.bulkActions&&i.unshift(React.createElement("td",null)),i},mutateData:function(t,e,a){if(""===e)return e;var r=this.props.options.mutators||{},o=r[t];return o?o(e,a):e},render:function(){var t,e=0;for(t in this.props.dataKeys)this.props.dataKeys.hasOwnProperty(t)&&e++;return this.props.options.actionableRows&&e++,this.props.options.bulkActions&&e++,React.createElement("tbody",null,React.createElement("tr",{className:"table-row"},React.createElement("th",{colSpan:e}," Total: ")),React.createElement("tr",{className:"table-row"},this.buildRowData()))}});module.exports=SumRow;