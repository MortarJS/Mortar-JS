"use strict";var _=require("lodash"),React=require("react/addons"),classNames=require("classnames"),SumRow=React.createClass({displayName:"SumRow",propTypes:{data:React.PropTypes.object.isRequired,dataKeys:React.PropTypes.object.isRequired,rows:React.PropTypes.array.isRequired,options:React.PropTypes.object},buildRowData:function(){var t=this.props.dataKeys,e=this.props.rows,a=_.cloneDeep(this.props.data[0]),o={};this.props.data.forEach(function(t){e.forEach(function(e){o[e]=o[e]||0,o[e]+=t[e]})});for(var r in t)e.forEach(function(e){t[r]===e?a[e]=o[e]:a[t[r]]=""});var s=a,n=0,c=Object.keys(t).map(function(e,a){return t[e]}),s=c.map(function(t,e){var a=_.get(s,t);if(""===a&&e+1==c.length)return React.createElement("td",{colSpan:n+1});if(""===a)return void n++;var o=_.clone(n);return n=0,content=[],o&&content.push(React.createElement("td",{colSpan:o})),content.push(React.createElement("td",{key:e},this.mutateData(t,a,s)||a)),content}.bind(this));return this.props.options&&this.props.options.actionableRows&&s.push(React.createElement("td",null)),this.props.options&&this.props.options.bulkActions&&s.unshift(React.createElement("td",null)),s},mutateData:function(t,e,a){if(""===e)return e;var o=this.props.options.mutators||{},r=o[t];return r?r(e,a):e},render:function(){var t,e=0;for(t in this.props.dataKeys)this.props.dataKeys.hasOwnProperty(t)&&e++;return this.props.options.actionableRows&&e++,this.props.options.bulkActions&&e++,React.createElement("div",null,React.createElement("tr",{className:"table-row"},React.createElement("th",{colSpan:e}," Total: ")),React.createElement("tr",{className:"table-row"},this.buildRowData()))}});module.exports=SumRow;